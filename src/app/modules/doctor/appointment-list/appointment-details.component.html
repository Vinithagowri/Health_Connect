<app-doctor-navbar></app-doctor-navbar>

<div class="container mt-4">
  <div class="card shadow p-3">
    <h2 class="card-title text-center mb-3">Your Appointments</h2>

    <ag-grid-angular
      style="width: 100%; height: 500px;"
      class="ag-theme-alpine"
      [rowData]="rowData"
      [columnDefs]="colDefs"
      [defaultColDef]="defaultColDef"
      [pagination]="true"
      (gridReady)="onGridReady($event)">
    </ag-grid-angular>
  </div>
</div>


<!-- <app-doctor-navbar></app-doctor-navbar>
<div class="container mt-4">
  <div class="card shadow p-4">
   
    <h2 class="text-center">Your Appointments</h2>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Patient Name</th>
          <th>Date</th>
          <th>Time</th>
          <th>Reason</th>
          <th>Status</th>
          <th>Update Status</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let app of appointments">
          <td>{{ app.patientName }}</td>
          <td>{{ app.appointmentDate | date: 'shortDate' }}</td>
          <td>{{ app.appointmentDate | date: 'shortTime' }}</td>
          <td>{{ app.reason }}</td>
          <td>{{ app.status }}</td>
          <td>
            <select class="form-select" [value]="app.status" #statusSelect
              (change)="updateStatus(app.appointmentId, statusSelect.value)" [disabled]="app.status === 'Cancelled' || app.status === 'Completed'"
              [title]="app.status === 'Cancelled' ? 'Cannot update a cancelled appointment' : ''">

              <option value="Pending">Pending</option>
              <option value="Confirmed">Confirmed</option>
              <option value="Completed">Completed</option>
              <option value="Cancelled">Cancelled</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>


  </div>
</div>

<!-- <table class="table table-bordered table-striped">
    <thead class="table-dark">
      <tr>
        <th>Patient Name</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Contact</th>
        <th>Appointment Date</th>
        <th>Time</th>
        <th>Reason</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let appointment of appointments">
        <td>{{ appointment.patientName }}</td>
        <td>{{ appointment.age }}</td>
        <td>{{ appointment.gender }}</td>
        <td>{{ appointment.contact }}</td>
        <td>{{ appointment.date }}</td>
        <td>{{ appointment.time }}</td>
        <td>{{ appointment.reason }}</td>
        <td>
          <span class="badge bg-success" *ngIf="appointment.status === 'Confirmed'">Confirmed</span>
          <span class="badge bg-warning text-dark" *ngIf="appointment.status === 'Pending'">Pending</span>
          <span class="badge bg-danger" *ngIf="appointment.status === 'Cancelled'">Cancelled</span>
        </td>
      </tr>
    </tbody>
  </table> -->
<!-- <div *ngIf="appointments.length === 0" class="text-center mt-3">
    <p class="text-muted">No appointments scheduled.</p>
  </div> --> -->