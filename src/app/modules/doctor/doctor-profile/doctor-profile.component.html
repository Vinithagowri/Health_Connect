<app-doctor-navbar></app-doctor-navbar>

<div class="container mt-5">
  <div class="card shadow p-4" style="border-radius: 16px;">
    <div *ngIf="showAlert" class="alert alert-success alert-dismissible fade show" role="alert">
      {{ alertMessage }}
      <button type="button" class="btn-close" aria-label="Close" (click)="closeAlert()"></button>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="mb-0 text-primary">Doctor Profile</h2>
      <button class="btn btn-outline-primary" (click)="toggleEdit()">
        {{ isEditMode ? 'Cancel' : (isProfileExist ? 'Edit Profile' : 'Create Profile') }}
      </button>
    </div>

    <form *ngIf="isEditMode" #profileForm="ngForm" (ngSubmit)="onSubmit()">
      <div class="text-center mb-4">
        <img src="https://img.icons8.com/color/96/000000/doctor-male.png" alt="doctor icon" class="mb-2" />
        <h4 class="mb-1 text-primary">{{ doctorName | titlecase }}</h4>
        <p class="text-muted">{{ doctorEmail }}</p>
        <hr />
      </div>

      <div class="mb-3">
        <label class="form-label">Specialization</label>
        <input type="text" class="form-control" name="specialization" [(ngModel)]="profile.specialization" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Clinic Name</label>
        <input type="text" class="form-control" name="clinicName" [(ngModel)]="profile.clinicName" required>
      </div>

      <div class="mb-3">
        <label class="form-label">Clinic Address</label>
        <textarea class="form-control" name="clinicAddress" [(ngModel)]="profile.clinicAddress" rows="2"
          required></textarea>
      </div>

      <div class="row">
        <div class="col-md-4 mb-3">
          <label class="form-label">City</label>
          <input type="text" class="form-control" name="city" [(ngModel)]="profile.city" required>
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label">State</label>
          <input type="text" class="form-control" name="state" [(ngModel)]="profile.state" required>
        </div>
        <div class="col-md-4 mb-3">
          <label class="form-label">Pincode</label>
          <input type="text" class="form-control" name="pincode" [(ngModel)]="profile.pincode" required>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">Phone Number</label>
        <input type="text" class="form-control" name="phoneNumber" [(ngModel)]="profile.phoneNumber" required>
      </div>

      <button type="submit" class="btn btn-primary w-100">
        {{ isProfileExist ? 'Update Profile' : 'Create Profile' }}
      </button>
    </form>

    <div *ngIf="!isEditMode" class="profile-view mt-3">
      <div class="text-center mb-4">
        <img src="https://img.icons8.com/color/96/000000/doctor-male.png" alt="doctor icon" class="mb-2" />
        <h4 class="mb-1 text-primary">{{ doctorName | titlecase}}</h4>
        <p class="text-muted">{{ doctorEmail }}</p>
        <hr />
      </div>
      <div class="row">
        <div class="col-md-4 mb-3 p-3 rounded bg-light">
          <strong><i class="bi bi-person-badge"></i> Specialization:</strong>
          <div class="pt-1">{{ profile.specialization }}</div>
        </div>
        <div class=" col-md-4 mb-3 p-3 rounded bg-light">
          <strong><i class="bi bi-hospital"></i> Clinic Name:</strong>
          <div class="pt-1">{{ profile.clinicName }}</div>
        </div>

        <div class="col-md-4 mb-3 p-3 rounded bg-light">
          <strong><i class="bi bi-geo-alt"></i> Clinic Address:</strong>
          <div class="pt-1">{{ profile.clinicAddress }}</div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-4 mb-3">
          <div class="p-3 rounded bg-light h-100">
            <strong><i class="bi bi-buildings"></i> City:</strong>
            <div class="pt-1">{{ profile.city }}</div>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3 rounded bg-light h-100">
            <strong><i class="bi bi-map"></i> State:</strong>
            <div class="pt-1">{{ profile.state }}</div>
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <div class="p-3 rounded bg-light h-100">
            <strong><i class="bi bi-123"></i> Pincode:</strong>
            <div class="pt-1">{{ profile.pincode }}</div>
          </div>
        </div>
      </div>

      <div class="mb-3 p-3 rounded bg-light">
        <strong><i class="bi bi-telephone"></i> Phone Number:</strong>
        <div class="pt-1">{{ profile.phoneNumber }}</div>
      </div>
    </div>

  </div>
</div>